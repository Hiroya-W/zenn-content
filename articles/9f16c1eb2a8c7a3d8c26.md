---
title: "Docker + VSCodeã§Zennã§è¨˜äº‹ã‚’æ›¸ãç’°å¢ƒã‚’ä½œã‚‹"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Docker", "VSCode"]
published: false
---

# ç’°å¢ƒæ§‹ç¯‰

`./docker/Dockerfile`ã¨`./docker-compose.yml`ã‚’é…ç½®ã—ã¾ã™ã€‚

## Dockerfile

ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®`Dockerfile`ã‚’ä½œæˆã—ã¾ã™ã€‚

```Dockerfile:Dockerfile
FROM node:lts-alpine

RUN apk update && \
    apk --no-cache add --virtual=git-deps git

WORKDIR /workspaces
```

## docker-compose.yml

ç”¨æ„ã—ãŸ`Dockerfile`ã‚’ç”¨ã„ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’`docker-compose.yml`ã«è¨˜è¿°ã—ã¾ã™ã€‚

```yml:docker-compose.yml
version: '3'
services:
  main:
    build: ./docker
    image: zenn-base
    container_name: zenn-docs
    volumes:
      - .:/workspaces/zenn-docs
    ports:
      - "8000:8000"
    tty: true
```

## devcontainer.json

VSCodeã®DevContainerç”¨ã®è¨­å®šã‚’è¨˜è¿°ã—ã¾ã™ã€‚

ã¾ãšã¯ã€VSCodeã§`docker/Dockerfile`ã‚„`docker-compose.yml`ã‚’é…ç½®ã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã¾ã™ã€‚

ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‹ã‚‰ã€`> Remote-Containers: Add Development Container Configuration Files...`ã‚’å®Ÿè¡Œã—ã€DevContainer ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

`.devcontainer`ãƒ•ã‚©ãƒ«ãƒ€ã«ã€`devcontainer.json`ã¨`docker-compose.yml`ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã“ã®ã†ã¡ã€`docker-compose.yml`ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¿…è¦ãªã„ã®ã§ã€å‰Šé™¤ã—ã¦ãŠãã¾ã™ã€‚

```
rm .devcontainer/docker-compose.yml
```

`devcontainer.json`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚


```diff:devcontainer.json
 {
     "name": "Existing Docker Compose (Extend)",
     "dockerComposeFile": [
         "../docker-compose.yml",
-        "docker-compose.yml",
     ],
     "service": "main",
-    "workspaceFolder": "/workspace",
+    "workspaceFolder": "/workspaces/zenn-docs",
     "settings": {
         "terminal.integrated.shell.linux": null
     },
     "extensions": []
 }
```

ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‹ã‚‰`> Remote-Containers: Reopen in Container`ã‚’å®Ÿè¡Œã—ã¦ã€Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã€VSCodeã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚

# ä½¿ã„æ–¹
